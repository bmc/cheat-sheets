<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>iPod</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<h1 id="ipod-cheat-sheet">iPod Cheat Sheet</h1>

<h2 id="using-apple-ipod-with-linux">Using Apple iPod with Linux.</h2>

<p>First, see:</p>

<p><a href="http://www.freedos.org/jhall/ipod/">http://www.freedos.org/jhall/ipod/</a>
<a href="http://pag.csail.mit.edu/~adonovan/hacks/ipod.html">http://pag.csail.mit.edu/~adonovan/hacks/ipod.html</a></p>

<h3 id="getting-ipod-to-mount-properly-and-with-the-right-permissions">Getting iPod to mount properly, and with the right permissions</h3>

<p>Install the following in <code>/usr/share/hal/fd/95userpolicy</code>:</p>

<pre><code>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt; &lt;!-- -*- SGML -*- --&gt;
&lt;deviceinfo version="0.2"&gt;
  &lt;device&gt;
    &lt;match key="storage.vendor" string="Apple"&gt;
      &lt;match key="storage.model" string="iPod"&gt;
        &lt;merge key="storage.requires_eject" type="bool"&gt;true&lt;/merge&gt;
        &lt;merge key="storage.removable" type="bool"&gt;false&lt;/merge&gt;
        &lt;merge key="storage.media_check_enabled" type="bool"&gt;false&lt;/merge&gt;
      &lt;/match&gt;
    &lt;/match&gt;
    &lt;match key="@block.storage_device:storage.vendor" string="Apple"&gt;
      &lt;match key="@block.storage_device:storage.model" string="iPod"&gt;
        &lt;match key="block.is_volume" bool="true"&gt;
          &lt;match key="volume.fsusage" string="filesystem"&gt;
            &lt;match key="volume.partition.number" int="1"&gt;
              &lt;merge key="volume.policy.should_mount" type="bool"&gt;false&lt;/merge&gt;
            &lt;/match&gt;
            &lt;match key="volume.partition.number" int="2"&gt;
              &lt;merge key="volume.policy.desired_mount_point" type="string"&gt;iPod&lt;/merge&gt;
              &lt;merge key="volume.policy.mount_option.sync" type="bool"&gt;true&lt;/merge&gt;
              &lt;merge key="volume.policy.mount_option.uid=bmc" type="bool"&gt;true&lt;/merge&gt;
            &lt;/match&gt;
          &lt;/match&gt;
	&lt;/match&gt;
      &lt;/match&gt;
    &lt;/match&gt;
  &lt;/device&gt;
&lt;/deviceinfo&gt;
</code></pre>

<p>See <a href="http://www.kgarner.com/blog/archives/2005/01/11/fc3-hal-ipod/">http://www.kgarner.com/blog/archives/2005/01/11/fc3-hal-ipod/</a></p>

<h3 id="accessing-ipod">Accessing iPod</h3>

<p>Use <em>gtkpod</em>.</p>

<h3 id="disconnecting-recalcitrant-ipod">Disconnecting recalcitrant iPod</h3>

<p>If iPod doesn&rsquo;t want to disconnect properly, use this quick hack solution:</p>

<p>Disable automount option in gtkpod, and create two scripts:</p>

<p><code>mount-ipod</code>:</p>

<pre><code>mount /media/iPod
</code></pre>

<p><code>umount-ipod</code>:</p>

<pre><code>sudo umount /media/iPod
exec sudo eject -s /dev/sda2
</code></pre>

<p>Then modify <em>gtkpod</em> front end so it looks like this:</p>

<pre><code>mount-ipod
env LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib /usr/local/bin/gtkpod
umount-ipod
</code></pre>


</body>
</html>
