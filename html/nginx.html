<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<!-- ERB: cheat-sheet.html.erb -->
<head>
<title>Nginx Cheat Sheet</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="toc.css">
<script type="text/javascript" src="toc.js">
</script>
</head>

<body>

<div id="content">

  <h1 id="title">Nginx Cheat Sheet</h1>

<div id="toc-block">
  <span id="toc-heading">Table of Contents</span>
  <div id="toc"></div>
</div>


<h2 id="simulating-apaches-userdir-with-nginx">Simulating Apache&rsquo;s <code>UserDir</code>, with nginx.</h2>

<pre><code># Apache userdir simulation.
location ~ ^/~([^/]+)(/.*)?$ {
    alias /home/$1/public_html$2;
    autoindex on;
    ssi on;
}
</code></pre>

<h2 id="rewrite-rules-for-redirects">Rewrite rules for redirects</h2>

<p>They&rsquo;re regex-based. e.g.:</p>

<pre><code>server {
    # Server-wide redirect

    rewrite ^/software/poll/?.* http://software.clapper.org/poll/ permanent;
    
    # Location-specific redirect
    
    location /bmc/blog/ {
        rewrite /bmc/blog/(.*)$ http://brizzled.clapper.org/$1;
    }
</code></pre>

<h2 id="fastcgi">FastCGI</h2>

<p>For instance, for PHP, Python or Ruby.</p>

<pre><code>location ~ \.php {
    include /etc/nginx/fastcgi_params;
    keepalive_timeout 0;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_param SCRIPT_FILENAME /var/www/html/$fastcgi_script_name;
    fastcgi_index index.php;
}
</code></pre>

</div> <!-- content -->

<script type="text/javascript">
createTOC();
</script>

</body>
</html>
